<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Asistente ABP Ciencias de la Computación</title>

<style>
body{
    font-family: Arial;
    background:#0f172a;
    color:white;
    text-align:center;
    padding:20px;
}

#chat{
    background:#1e293b;
    border-radius:12px;
    padding:15px;
    height:350px;
    overflow-y:auto;
    text-align:left;
}

.msg{margin:10px 0;padding:10px;border-radius:10px;}
.user{background:#065f46;}
.bot{background:#1e40af;}

input{width:70%;padding:10px;border-radius:8px;border:none;}
button{padding:10px 15px;border:none;border-radius:8px;background:#22c55e;color:white;cursor:pointer;}
</style>
</head>

<body>

<h1>Asistente ABP Ciencias de la Computación</h1>

<div id="chat"></div>
<br>

<input id="mensaje" placeholder="Escribe tu mensaje">
<button onclick="enviar()">Enviar</button>

<script>

const BACKEND = "https://ebi-abp-creador-de-proyectos-tecnologicos.onrender.com";

function agregar(texto,tipo){
    const div=document.createElement("div");
    div.className="msg "+tipo;
    div.textContent=texto;
    document.getElementById("chat").appendChild(div);
}

async function enviar(){

    const msg=document.getElementById("mensaje").value;
    if(!msg) return;

    agregar("Tú: "+msg,"user");
    document.getElementById("mensaje").value="";

    try{

        const res=await fetch(BACKEND+"/chat",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({message:msg})
        });

        const data=await res.json();

        if(data.error){
            agregar("Error: "+data.error,"bot");
            return;
        }

        agregar("GPT: "+data.reply,"bot");

    }catch(e){
        agregar("Error conexión servidor","bot");
    }
}

</script>

</body>
</html>
